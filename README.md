# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Airflow –∏ ClickHouse
üìä –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ.
–ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –¥–∏–Ω–∞–º–∏–∫–µ –ø—Ä–æ–¥–∞–∂, –∏—Å–ø–æ–ª—å–∑—É—è Apache Airflow –∏ ClickHouse

## –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ 10 –∞—Ä—Ç–∏–∫—É–ª–∞–º —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º Python-—Å–∫—Ä–∏–ø—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ DAG'–∞ –≤ Apache Airflow –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:00 –ú–°–ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (ClickHouse)
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã –¥–∏–Ω–∞–º–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Apache Airflow** ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DAG'–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.  
- **ClickHouse** ‚Äì –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.  
- **Postgres 13** ‚Äì –±–∞–∑–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö Apache Airflow.  
- **Redis** ‚Äì –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è CeleryExecutor –≤ Airflow.  
- **Docker, Docker Compose** ‚Äì –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.  
- **Python, SQL** ‚Äì –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.  
- **DBeaver** ‚Äì —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ClickHouse —á–µ—Ä–µ–∑ SQL-–∑–∞–ø—Ä–æ—Å—ã.  
- **Git –∏ GitHub** ‚Äì –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π.

# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
 –û—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π deploying –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–Ω–Ω—ã–π —Ñ–∞–π–ª docker-compose.yml –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç–æ—Ä–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
- ##  Airflow: 
–í–º–µ—Å—Ç–æ SequentialExecutor –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è CeleryExecutor, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç PostgreSQL (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö) –∏ Redis (–±—Ä–æ–∫–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π)
### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã Airflow:
- **airflow-init** ‚Äì –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **airflow-scheduler** ‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ DAG'–æ–≤
- **airflow-triggerer** ‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- **airflow-webserver** ‚Äì –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (8080:8080)
- **airflow-worker** ‚Äì –≤–æ—Ä–∫–µ—Ä—ã, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ –∑–∞–¥–∞—á–∏


![Reference Image](/images/–æ—Å–Ω–æ–≤–Ω—ã–µ_—Å–µ—Ä–≤–∏—Å—ã_airflow.png)

üìå–í–∞–∂–Ω–æ: 

Airflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

- AIRFLOW__CORE__EXECUTOR=CeleryExecutor ‚Äì –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á
- AIRFLOW__DATABASE__SQL_ALCHEMY_CONN ‚Äì –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- AIRFLOW__CELERY__BROKER_URL=redis://:@redis:6379/0 ‚Äì –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π Redis

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Airflow:
- –ú–∞—Å—Å–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ **x-airflow-common** (—à–∞–±–ª–æ–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö).
- build: . ‚Üí –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞ –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ apache/airflow:2.10.5
- **PostgreSQL** + **Redis** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è CeleryExecutor.
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∞–¥–º–∏–Ω-—é–∑–µ—Ä–∞ –≤ **airflow-init**

![Reference Image](/images/x-airflow-common.png)

- ## ClickHouse —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
    ClickHouse —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
``` yaml
deploy:
  resources:
    limits:
      memory: 10G  
    reservations:
      memory: 2G  
```
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø–æ—Ç—Ä–µ–±–ª—è–µ–º—É—é –ø–∞–º—è—Ç—å 10 –ì–ë
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑–µ—Ä–≤ 2 –ì–ë –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–µ—à–∞ –∏ –ø–æ—Ç–æ–∫–æ–≤:
``` yaml
environment:
  MAX_MEMORY_USAGE: 8589934592  # 8 –ì–ë
  MAX_BYTES_BEFORE_EXTERNAL_SORT: 4294967296  # 4 –ì–ë
  MAX_BYTES_BEFORE_EXTERNAL_GROUP_BY: 4294967296  # 4 –ì–ë
  MAX_THREADS: 4  # 4 –ø–æ—Ç–æ–∫–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å
  MARK_CACHE_SIZE: 536870912  # 512 –ú–ë –∫—ç—à –∏–Ω–¥–µ–∫—Å–æ–≤
  UNCOMPRESSED_CACHE_SIZE: 536870912  # 512 –ú–ë –∫—ç—à –Ω–µ–∂–∞—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (8 –ì–ë)
- –£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –¥–∏—Å–∫–æ–≤—ã–π –≤–≤–æ–¥-–≤—ã–≤–æ–¥ –∑–∞ —Å—á–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ 4 –ø–æ—Ç–æ–∫–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
#### –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç–æ–º–∞:
``` yaml
volumes:
  - clickhouse_data:/var/lib/clickhouse
  - ./clickhouse_tmp:/var/lib/clickhouse/tmp
```
üìå–í–∞–∂–Ω–æ: 
- **ClickHouse** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –±—Ä–æ–∫–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
- **MAX_THREADS=4** –≤–∞–∂–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —è–¥–µ—Ä
 - **PostgreSQL** + **Redis** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è Airflow

 - ##  PostgreSQL (Postgres 13):
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö **Airflow**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å **airflow:airflow** –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è
``` yaml
services:
  postgres:
    image: postgres:13
    environment:
      POSTGRES_USER: airflow
      POSTGRES_PASSWORD: airflow
      POSTGRES_DB: airflow
    volumes:
      - postgres-db-volume:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD", "pg_isready", "-U", "airflow"]
      interval: 10s
      retries: 5
      start_period: 5s
    restart: always
```
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω healthcheck ‚Äì Airflow –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –ø–æ–∫–∞ Postgres –Ω–µ –≥–æ—Ç–æ–≤

 - ## Redis (7.2-bookworm):
- –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è Celery
``` yaml
services:
  redis:
    image: redis:7.2-bookworm
    expose:
      - 6379
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 30s
      retries: 50
      start_period: 30s
    restart: always
```
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω healthcheck ‚Äì Airflow –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –ø–æ–∫–∞ Redis –Ω–µ –≥–æ—Ç–æ–≤

 - ## Airflow Init ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥–∏ /sources/logs, /sources/dags, /sources/plugins/, /sources/projects
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç Airflow
``` yaml
airflow-init:
  <<: *airflow-common
  entrypoint: /bin/bash
  command:
    - -c
    - |
      projects/wildberries
      chown -R "${AIRFLOW_UID}:0" /sources/{logs,dags,plugins,projects}
      exec /entrypoint airflow version
```
- ## Healthchecks ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
    –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (Postgres, Redis, Airflow) –∏–º–µ—é—Ç healthcheck, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –æ–Ω–∏ —Å—Ç–∞—Ä—Ç—É—é—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.
- ### Airflow Webserver:
``` yaml
healthcheck:
  test: ["CMD", "curl", "--fail", "http://localhost:8080/health"]
  interval: 30s
  timeout: 10s
  retries: 5
  start_period: 30s
```
- ### Airflow Scheduler:
``` yaml
healthcheck:
  test: ["CMD", "curl", "--fail", "http://localhost:8974/health"]
  interval: 30s
  timeout: 10s
  retries: 5
  start_period: 30s
```
‚úÖ  –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã Airflow –Ω–µ —Å—Ç–∞—Ä—Ç—É—é—Ç, –ø–æ–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ –≥–æ—Ç–æ–≤—ã

- ## Flower ‚Äì –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Celery
Flower (port 5555) –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å:
``` yaml
flower:
  <<: *airflow-common
  command: celery flower
  profiles:
    - flower
  ports:
    - "5555:5555"
  healthcheck:
    test: ["CMD", "curl", "--fail", "http://localhost:5555/"]
    interval: 30s
    timeout: 10s
    retries: 5
    start_period: 30s
  restart: always
```
‚úÖ–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤–æ—Ä–∫–µ—Ä–æ–≤ Celery.

## üíæ –ö–∞–∫ PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ?  

PostgreSQL –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∞–º–∏—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ ‚Äî —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ ClickHouse.  
–û–¥–Ω–∞–∫–æ, –æ–Ω –∏–≥—Ä–∞–µ—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å –≤ —Ä–∞–±–æ—Ç–µ Airflow:  

üìå **–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ PostgreSQL?**  
-  **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ Airflow** (DAG'–∏, —Å—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á, –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è). 
-  **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—É—Å–∫–æ–≤ DAG'–æ–≤** (execution_date, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
-  **–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á** (—É—Å–ø–µ—à–Ω—ã–µ, —É–ø–∞–≤—à–∏–µ –∏ —Ä–µ—Ç—Ä–∞–∏)
-  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø—ã** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Airflow UI) 

üìå **–ü–æ—á–µ–º—É PostgreSQL?**  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è DAG'–æ–≤  
- –ù—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã CeleryExecutor (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏)
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å (–¥–∞–∂–µ –µ—Å–ª–∏ Airflow –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è)

‚û° **–í—ã–≤–æ–¥:** PostgreSQL ‚Äî —ç—Ç–æ "–º–æ–∑–≥" Apache Airflow, –∞ ClickHouse –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.  

## –î–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç: 
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–µ–ø–ª–æ–π Apache Airflow —Å Celery.
- ‚úÖ ClickHouse —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
- ‚úÖ PostgreSQL + Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–±–æ—Ç—ã Celery.
- ‚úÖ Healthchecks –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Üí Airflow –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –ø–æ–∫–∞ Postgres –∏ Redis –Ω–µ –≥–æ—Ç–æ–≤—ã.
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (airflow-init) ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞.

–≠—Ç–æ –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä–æ–µ –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã.

## üìå –ò—Ç–æ–≥
‚úî **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**  
‚úî **ClickHouse —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–µ—à–µ–º –∏ –ø–æ—Ç–æ–∫–∞–º–∏**  
‚úî **Airflow + Celery –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π**  
‚úî **Healthchecks ‚Äî —Å–µ—Ä–≤–∏—Å—ã —Å—Ç–∞—Ä—Ç—É—é—Ç –≤ –Ω—É–∂–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**  
‚úî **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"** 